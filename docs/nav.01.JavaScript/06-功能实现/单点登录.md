# 单点登录

Single Sign On (SSO)，是目前企业业务中整合的解决方案之一

当一个系统成功登录以后，passport将会颁发一个令牌给各个子系统，子系统可以拿着令牌会获取各自的受保护资源，为了减少频繁认证，各个子系统在被passport授权以后，会建立一个局部会话，在一定时间内可以无需再次向passport发起认证

## 实现

- 同域名下的单点登录
  - cookie， domain 设置父域
- 不同域名
  - 通过认证中心的请求进行校验
  - 如果登录则重定向回去，将 token 携带在 url 上
  - 将 Token 写入系统 Cookie，然后给本次访问放行
  - 此种实现方式相对复杂，支持跨域，扩展性好，是单点登录的标准做法
- 不同域名 2
  - 前端通过 iframe+postMessage() 方式，将同一份 Token 写入到了多个域下的 LocalStorage 中，前端每次在向后端发送请求之前，都会主动从 LocalStorage 中读取Token并在请求中携带，这样就实现了同一份Token 被多个域所共享
